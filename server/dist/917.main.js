"use strict";exports.id=917,exports.ids=[917],exports.modules={917:(t,e,r)=>{r.r(e),r.d(e,{default:()=>s});var o=r(185),i=r.n(o),n=r(913);(async()=>{await i().connect(n.Z.mongodb.path)})().catch((t=>{throw console.log(t),new Error("error con mongoose")}));const c=new o.Schema({id:{type:Number,required:!0},timestamps:{type:Number},nombre:{type:String,required:!0},descripcion:{type:String,required:!0},codigo:{type:String,required:!0},url:{type:String,required:!0},precio:{type:Number,required:!0},stock:{type:Number}}),s=class extends class{constructor(t,e){this.save=async t=>{try{const e=await this.getAll(),r=Date.now();let o;o=0==e.length?1:Number(e[e.length-1].id)+1;const i=Object.assign({id:o,timestamp:r},t),n=new this.collection(i);return await n.save(),o}catch(t){throw console.log(t),new Error("No se pudo guardar")}},this.getAll=async()=>{try{return await this.collection.find()}catch(t){throw console.log(t),new Error("Error returning all products")}},this.getById=async t=>{try{return await this.collection.findOne({id:t})}catch(t){throw console.log(t),new Error("Error pidiendo los datos")}},this.modifyById=async(t,e)=>{try{return null!=this.getById(e)&&(""!=t.nombre&&await this.collection.updateOne({id:e},{$set:{nombre:t.nombre}}),""!=t.descripcion&&await this.collection.updateOne({id:e},{$set:{descripcion:t.descripcion}}),""!=t.url&&await this.collection.updateOne({id:e},{$set:{url:t.url}}),null!=t.precio&&await this.collection.updateOne({id:e},{$set:{precio:t.precio}}),!0)}catch(t){throw console.log(t),new Error("Error pidiendo los datos")}},this.deleteById=async t=>{try{return null!=this.getById(t)&&(await this.collection.deleteOne({id:t}),!0)}catch(t){throw new Error("Error al borrar el producto")}},this.deleteAll=async()=>{try{await this.collection.remove()}catch(t){throw new Error("Error borrando")}},this.collection=i().model(t,e)}}{constructor(){super("product",c)}}}};